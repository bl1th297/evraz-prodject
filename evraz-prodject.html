<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link
            rel="stylesheet"
            href="evraz-prodject.css"
    >
</head>

<style>
    .radar-indicators {
        display: flex;
        gap: 20px;
        margin-top: 20px;
    }
    .indicator {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background-color: gray; /* по умолчанию */
    }
    .green {
        background-color: green;
    }
    .red {
        background-color: red;
    }
    .yellow {
        background-color: yellow;
        body {
            margin: 0;
            background: #222;
        }
        canvas {
            display: block;
            margin: auto;
            background: #444;
        }
    }
</style>
</head>
<body>

<div class="rectangle1"></div>
<div class="rectangle2"></div>
<div class="rectangle3"></div>
<div class="rectangle4"></div>
<div class="rectangle5"></div>
<div class="rectangle6"></div>
<div class="rectangle7"></div>
<div class="rectangle8"></div>
<div class="square"></div>
<div class="rectangle9"></div>
<div class="rectangle10"></div>
<div class="rectangle11"></div>
<div class="rectangle12"></div>
<div class="rectangle13"></div>
<div class="rectangle14"></div>
<div class="rectangle15"></div>
<div class="rectangle16"></div>
<div class="rectangle17"></div>
<div class="rectangle18"></div>
<div class="rectangle19"></div>
<div class="rectangle20"></div>
<div class="rectangle21"></div>
<div class="rectangle22"></div>
<div class="rectangle23"></div>
<div class="rectangle24"></div>
<div class="circle"></div>
<div class="circle1"></div>
<div class="circle2"></div>
<div class="circle3"></div>
<div class="circle4"></div>
<div class="circle5"></div>
<div class="circle6"></div>
<div class="circle7"></div>
<div class="circle8"></div>
<div class="circle9"></div>

<img id="image-container" src="img/b.png">
<h3>Смеситель</h3>
<button id="left-on">Включить</button>
<button id="left-off">Выключить</button>
<button id="left-err">Авария</button>

<!-- Кнопки для управления правым индикатором -->
<h3>Правый индикатор</h3>
<button id="right-on">Включить</button>
<button id="right-off">Выключить</button>
<button id="right-err">Авария</button>

<!-- Контейнер для индикаторов -->
<div id="indicatorsContainer"></div>
<canvas id="conveyor" width="800" height="200"></canvas>

<script>
    let arr = ['img/b.png', "img/o.png","img/g.png", "img/buttom.png",'img/b.png', "img/o.png", "img/o.png", "img/buttom.png", "img/o.png" ]
    let arrPos = [0, 101,202, 303, 353,403, 650, 905, 1021, 1116,1210 ]
    let i = 1
    function changeSrc()
    {
        // Путь к новой картинке
        const img = document.getElementById("image-container")
        // Устанавливаем путь к изображению
        img.src = arr[i];
        img.style.left = arrPos[i] + 'px'
        if (i === 0) i += 1
        else i += 1;
        if(arr.length === i) i= 0


    }
    setInterval(changeSrc, 3000)
    // Возможные состояния

    let indicators = document.createElement("div");
    indicators.className = "radar-indicators";

    // Создаем левый индикатор
    let leftIndicator = document.createElement("div");
    leftIndicator.className = "indicator left";
    leftIndicator.id = "left-indicator";

    // Создаем правый индикатор
    let rightIndicator = document.createElement("div");
    rightIndicator.className = "indicator right";
    rightIndicator.id = "right-indicator";

    // Вставляем их в контейнер
    indicators.appendChild(leftIndicator);
    indicators.appendChild(rightIndicator);
    document.getElementById('indicatorsContainer').appendChild(indicators);

    // Переменные состояния (можно расширять или менять по необходимости)
    let leftState = 'off';   // возможные значения: 'on', 'off', 'error'
    let rightState = 'off';

    // Функция обновления цвета по состоянию

    // Обновляем левый индикатор
    function updateIndicators() {
        // Обновляем левый индикатор
        switch (leftState) {
            case 'on':
                leftIndicator.className = "indicator left green";
                break;
            case 'off':
                // Теперь 'off' — красный (авария)
                leftIndicator.className = "indicator left red";
                break;
            case 'error':
                // Теперь 'error' — желтый (выключено)
                leftIndicator.className = "indicator left yellow";
                break;
        }

        // Обновляем правый индикатор
        switch (rightState) {
            case 'on':
                rightIndicator.className = "indicator right green";
                break;
            case 'off':
                rightIndicator.className = "indicator right red";
                break;
            case 'error':
                rightIndicator.className = "indicator right yellow";
                break;
        }
    }

    // Обработчики кнопок для левого индикатора
    document.getElementById('left-on').addEventListener('click', () => {
        leftState='on';
        updateIndicators();
    });
    document.getElementById('left-off').addEventListener('click', () => {
        leftState='off';
        updateIndicators();
    });
    document.getElementById('left-err').addEventListener('click', () => {
        leftState='error';
        updateIndicators();
    });

    // Обработчики кнопок для правого индикатора
    document.getElementById('right-on').addEventListener('click', () => {
        rightState='on';
        updateIndicators();
    });
    document.getElementById('right-off').addEventListener('click', () => {
        rightState='off';
        updateIndicators();
    });
    document.getElementById('right-err').addEventListener('click', () => {
        rightState='error';
        updateIndicators();
    });

    // Изначально обновим состояние
    const canvas = document.getElementById('conveyor');
    const ctx = canvas.getContext('2d');

    const conveyorColor = '#00aa00'; // Цвет конвейера
    const conveyorHeight = 40; // Высота полосы
    const speed = 2; // Скорость движения

    let offsetX = 0; // Смещение для анимации

    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Рисуем длинную полоску, которая движется
        ctx.fillStyle = conveyorColor;

        // Вычисляем длину полосы так, чтобы она повторялась
        const patternLength = 200; // длина повторяющегося паттерна

        // Смещение для эффекта движения
        offsetX += speed;
        if (offsetX > patternLength) {
            offsetX -= patternLength;
        }

        // Рисуем два прямоугольника для бесшовного эффекта
        ctx.fillRect(-offsetX, (canvas.height - conveyorHeight) / 2, patternLength, conveyorHeight);
        ctx.fillRect(patternLength - offsetX, (canvas.height - conveyorHeight) / 2, patternLength, conveyorHeight);

        requestAnimationFrame(animate);
    }

    animate();
</script>



</body>
</html>